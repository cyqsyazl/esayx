# esayx - 阿里云ESA优选IP工具

---

`esayx` 是一个专为**阿里云弹性伸缩（ESA）服务**或任何需要通过指定IP进行HTTP/HTTPS请求的场景而设计的**优选IP扫描工具**。它通过强制绑定IP地址并测试响应时间，帮助你从一个IP列表中筛选出连接速度更快、响应更稳定的优选IP地址，从而优化你的服务访问性能。

## ✨ 功能特性

* **HTTP/HTTPS状态码检查**：首先对每个IP执行HTTP/HTTPS请求，并检查响应状态码是否为 `200`，确保IP可用且目标服务正常响应。
* **强制IP绑定请求**：工具能够强制HTTP请求通过指定的IP地址发送，而不是依赖DNS解析，这对于测试特定IP的连接性非常关键。
* **TCP连接延迟测试**：对于返回 `200` 状态码的IP，工具会进一步进行多次（默认为5次）TCP连接延迟测试，计算平均延迟，以评估IP的实际网络性能。
* **并发控制**：支持自定义并发数量，允许你根据网络条件和目标服务器的承受能力来调整扫描速度。
* **IP列表导入**：从指定文件中读取IP地址列表，方便批量测试。
* **结果排序与输出**：根据平均TCP连接延迟对所有成功（状态码200）的IP进行排序，并将延迟最低的前10个IP及其延迟信息输出到指定文件。
* **用户代理设置**：自定义HTTP请求的用户代理（User-Agent），模拟真实浏览器行为。
* **超时配置**：可配置HTTP请求和TCP拨号的超时时间，避免长时间等待无效连接。

## ⚙️ 编译

`esayx` 使用 [Go 语言](https://golang.org/) 编写，编译过程非常简单。请确保你的系统已安装 Go 1.16 或更高版本。

1.  **下载源代码：** 将所有Go源代码文件（例如 `scan.go`）下载到你的本地目录。
2.  **打开终端/命令行：** 导航到包含 `scan.go` 文件的目录。
3.  **执行编译命令：**

    ```bash
    go build -o scan scan.go
    ```

    成功编译后，你将在当前目录下找到一个名为 `scan`（在 Windows 系统上是 `scan.exe`）的可执行文件。

## 🚀 使用

编译完成后，你可以通过命令行来运行 `esayx` 工具。

### 命令格式

```bash
./scan -u <目标URL> [可选参数]
